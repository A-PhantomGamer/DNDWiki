<!-- characters.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Characters - D&D Campaign Wiki</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/dm-mode.css">
    <link rel="stylesheet" href="css/character-importer.css">
    <link rel="stylesheet" href="css/characters.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="js/character-importer.js" defer></script>
</head>
<body>
    <script>
        // Define the openImportModal function
        function openImportModal() {
            console.log('openImportModal called from inline script');
            const modal = document.getElementById('importerModal');
            if (modal) {
                modal.style.display = 'block';
            } else {
                console.error('Modal not found when trying to open it');
            }
        }
    </script>
    <main>
        <section id="characters">
            <h2>Characters</h2>
            
            <!-- Character Controls -->
            <div class="character-controls">
                <div class="control-group">
                    <a href="character-create.html" class="create-character-btn primary-btn">Create New Character</a>
                </div>
                <div class="filter-group">
                    <select id="campaign-filter">
                        <option value="all">All Campaigns</option>
                    </select>
                    <input type="text" id="character-search" placeholder="Search characters...">
                </div>
            </div>

            <!-- Character Cards Container -->
            <div class="character-cards">
                <!-- Character Card Template -->
                <div class="character-card">
                    <div class="card-header">
                        <h2 class="character-name">Character Name</h2>
                        <div class="character-subtitle">Race Class - Level X</div>
                    </div>

                    <div class="stats-grid">
                        <!-- Ability Scores -->
                        <!-- ...copy ability score boxes from character-card.html... -->
                    </div>

                    <div class="combat-stats">
                        <!-- Combat Stats -->
                        <!-- ...copy combat stat boxes from character-card.html... -->
                    </div>

                    <div class="section">
                        <div class="section-title">Proficiencies</div>
                        <div class="section-content">
                            List proficiencies here
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-title">Equipment</div>
                        <div class="section-content">
                            List equipment here
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-title">Features</div>
                        <div class="section-content">
                            List features here
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Character Importer Modal -->
    <div class="importer-modal" id="importerModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Import Character from PDF</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="pdf-file" class="file-label">
                        <span class="label-text">Choose Character Sheet PDF</span>
                        <input type="file" 
                               id="pdf-file" 
                               accept=".pdf"
                               class="file-input">
                    </label>
                    <div class="selected-file"></div>
                    <small class="help-text">Click to select your character sheet PDF file</small>
                </div>
                <div id="import-status" class="status-message"></div>
            </div>
            <div class="modal-footer">
                <button type="button" id="cancel-import" class="btn">Cancel</button>
                <button type="button" id="import-character" class="btn btn-primary" disabled>Import</button>
            </div>
        </div>
    </div>

    <!-- DM Authentication Modal -->
    <div id="dm-password-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>DM Authentication</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="dm-password">Enter DM Password</label>
                    <input type="password" id="dm-password" class="form-control">
                </div>
                <div id="dm-auth-status" class="status-message"></div>
            </div>
            <div class="modal-footer">
                <button type="button" id="verify-password" class="btn btn-primary">Verify</button>
                <button type="button" id="cancel-auth" class="btn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- DM Mode Button -->
    <button class="dm-mode-toggle" id="dm-mode-toggle">DM Mode</button>


    <!-- Move scripts just before closing body tag -->
    <script src="js/components.js"></script>
    <script src="js/dm-mode.js"></script>
    <script src="js/character-importer.js"></script>
    <script src="js/characters.js"></script>
</body>
</html>
